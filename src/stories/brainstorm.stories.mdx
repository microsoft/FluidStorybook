import { Story, Meta } from '@storybook/addon-docs/blocks';
import { FluidLoader } from '../fluidRendering/fluidLoader';
import {
  NoteroContainerFactory,
  NoteroInstantiationFactory,
  NoteroView,
} from "../fluidObjects/brainstorm";

<Meta title="React Demos/Brainstorm" parameters={{ defaultSrcFile: './src/fluidObjects/brainstorm/fluid-object/main.ts'}} />

# Brainstorm

This example demonstrates a simple idea sharing board. Users can create a "sticky note" with an idea
on it and then add it to the board. Connected users will automatically see the new sticky note and are able
to create and share sticky notes of their own. As notes are added, all connected users can
vote on the proposed sticky note ideas and can highlight their own ideas.

<a href="https://agreeable-hill-0eeff5b10.azurestaticapps.net/docs/concepts/dds/" target="_blank">Distributed data structures</a> (DDSes) used include:

* <a href="https://agreeable-hill-0eeff5b10.azurestaticapps.net/apis/map/sharedmap/" target="_blank">SharedMap</a>

<Story name="Demo">
  <FluidLoader factory={NoteroContainerFactory} title={NoteroInstantiationFactory.type} view={NoteroView} viewType="react"></FluidLoader>
</Story>

<br /><br />

### Code Highlights

Here's how SharedMap is used in Brainstorm.

```typescript
// brainstorm/fluid-object/main.ts
// Define a SharedMap for notes
private notesMap: SharedMap;

...

// Creating a SharedMap
private createSharedMap(id: string): void {
    const map = SharedMap.create(this.runtime);
    this.root.set(id, map.handle);
}

this.createSharedMap('notes');

...

// Access a SharedMap that has been created
this.notesMap = await this.root.get<IFluidHandle<SharedMap>>("notes").get();

...

// Set a note value on the SharedMap
public createNote = (text: string): void => {
  const note: INote = {
      id: uuidv4(),
      text: text,
      user: this.getUser()
  };
  this.notesMap.set(note.id, note);
}

```


### Additional Resources

* <a href="https://github.com/microsoft/FluidExamples" target="_blank">Brainstorm Repository</a>
